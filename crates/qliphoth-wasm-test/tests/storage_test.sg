// Storage System Test
// Tests localStorage-like key/value storage

pub fn main() -> i64 {
    console::log_str("=== Storage Test ===");

    // Set some values
    console::log_str("Setting user_name = Alice");
    storage::local_set("user_name", "Alice");

    console::log_str("Setting user_age = 30");
    storage::local_set("user_age", "30");

    console::log_str("Setting theme = dark");
    storage::local_set("theme", "dark");

    // Get values back
    console::log_str("Getting user_name...");
    let name = storage::local_get("user_name");
    console::print(name as i64);

    console::log_str("Getting theme...");
    let theme = storage::local_get("theme");
    console::print(theme as i64);

    // Get non-existent key
    console::log_str("Getting missing_key...");
    let missing = storage::local_get("missing_key");
    console::print(missing as i64);

    // Remove a key
    console::log_str("Removing user_age...");
    storage::local_remove("user_age");

    // Try to get removed key
    console::log_str("Getting user_age after removal...");
    let age = storage::local_get("user_age");
    console::print(age as i64);

    // Clear all storage
    console::log_str("Clearing storage...");
    storage::local_clear();

    // Verify clear worked
    console::log_str("Getting user_name after clear...");
    let name2 = storage::local_get("user_name");
    console::print(name2 as i64);

    console::log_str("Storage test complete!");
    0
}
